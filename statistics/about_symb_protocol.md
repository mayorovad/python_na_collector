#Протокол передачи пакетов
##Протокол cli
[Здесь](http://wiki.n1zyy.com/NetApp-SANtricity-Notes) делается предположение, что используемый протокол называется SYMBol.

Это протокол ONC (Open Network Computing) RPC (Remote Procedure Call) протокол, в котором используется XDR (External Data Representation).
Описание XDR можно посмотреть [здесь](https://tools.ietf.org/html/rfc4506).
Про ONC RPC написано [здесь](https://tools.ietf.org/html/rfc5531).


##Как передает данные cli
Шаг 1. Создание нового соединения на порте i, обмен пакетами:
0/1 0/2 0/43

Шаг 2. Создание соединения на порте i+1, отправляются пакеты:
0/2 0/43 0/48 0/40

Шаг 3. В ответ на пакет 0/40 сервер отправляет 58576 байт информации

Шаг 4. Создается соединение на порте i+2, обмен пакетами:
2/1 2/161 0/43

Шаг 5. Соединение i+3, пакеты:
0/2 0/43 2/185 ...

На шаге 5 параллельно с соединением i+3 отправляет пакеты
соединение i+2, чаще всего в этом процессе участвуют 3 пакета:
0/43, 0/48, 0/185.

При выполнении команд, запрашивающих большого количества данных
(например, **show allVolumes;**) cli отправляет пакет 0/40 по
соеднинению i+3 и цикл повторяется.


> Похоже, что номера модулей в коллекторе на Перле это не версии
> модуля, а подпрограммы, которые запускаются последовательно
> и создают соединения
